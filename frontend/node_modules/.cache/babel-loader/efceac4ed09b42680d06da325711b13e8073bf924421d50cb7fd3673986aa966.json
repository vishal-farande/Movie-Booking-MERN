{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/regenerator/index.js\";import StripeCheckout from'react-stripe-checkout';import React,{useState}from'react';import axios from'axios';import Swal from'sweetalert2';import withReactContent from'sweetalert2-react-content';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MySwal=withReactContent(Swal);function App(){var publishableKey='pk_test_51KxCX8SAr7YNHSEgxFEpX0WknXkLlhW3Q1aFKmZ3gubWFUj7sbKeW8nwOkFmtnlhPLTnnrQ0QzXarOABsSDPZb4y00x0yjVTY5';var navigate=useNavigate();var _useState=useState({name:'Movie Ticket',price:150}),_useState2=_slicedToArray(_useState,2),ticket=_useState2[0],setticket=_useState2[1];var priceForStripe=ticket.price*100;var handleSuccess=function handleSuccess(){MySwal.fire({icon:'success',title:'Payment was successful',time:4000});navigate(\"/eticket\");};var handleFailure=function handleFailure(){MySwal.fire({icon:'error',title:'Payment was not successful',time:4000});navigate(\"/bookinghistory\");};var payNow=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios({url:'http://localhost:3000/payment',method:'post',data:{amount:ticket.price*100,token:token}});case 3:response=_context.sent;if(response.status===200){handleSuccess();}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);handleFailure();console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function payNow(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"back\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/bookticket\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-secondary text-white\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-arrow-left\",\"aria-hidden\":\"true\"}),\"\\xA0\\xA0Back\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card1 my-4 p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Movie Ticket Payment Details\"}),\"\\xA0\\xA0\\xA0\\xA0\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center mrow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/color/48/000000/mastercard-logo.png\",width:\"35px\",height:\"35px\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/color/48/000000/visa.png\",width:\"35px\",height:\"35px\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/color/48/000000/paypal.png\",width:\"35px\",height:\"35px\"})]})}),/*#__PURE__*/_jsx(StripeCheckout,{stripeKey:publishableKey,label:\"Pay Now\",name:\"Pay With Credit/ Debit Card\",billingAddress:true,shippingAddress:true,amount:priceForStripe,description:\"Your total is INR\".concat(ticket.price),token:payNow})]})})})]});}export default App;","map":{"version":3,"names":["StripeCheckout","React","useState","axios","Swal","withReactContent","useNavigate","MySwal","App","publishableKey","navigate","name","price","ticket","setticket","priceForStripe","handleSuccess","fire","icon","title","time","handleFailure","payNow","token","url","method","data","amount","response","status","console","log"],"sources":["C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/src/components/Payment.jsx"],"sourcesContent":["import StripeCheckout from 'react-stripe-checkout';\r\nimport React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport Swal from 'sweetalert2';\r\nimport withReactContent from 'sweetalert2-react-content';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\n\r\n\r\nconst MySwal = withReactContent(Swal);\r\n\r\nfunction App() {\r\n\tconst publishableKey =\r\n\t\t'pk_test_51KxCX8SAr7YNHSEgxFEpX0WknXkLlhW3Q1aFKmZ3gubWFUj7sbKeW8nwOkFmtnlhPLTnnrQ0QzXarOABsSDPZb4y00x0yjVTY5';\r\n\tconst navigate = useNavigate();\r\n\tconst [ticket, setticket] = useState({\r\n\t\tname: 'Movie Ticket',\r\n\t\tprice: 150,\r\n\r\n\t});\r\n\r\n\tconst priceForStripe = ticket.price * 100;\r\n\r\n\tconst handleSuccess = () => {\r\n\t\tMySwal.fire({\r\n\t\t\ticon: 'success',\r\n\t\t\ttitle: 'Payment was successful',\r\n\t\t\ttime: 4000,\r\n\r\n\t\t}); navigate(\"/eticket\");\r\n\t};\r\n\tconst handleFailure = () => {\r\n\t\tMySwal.fire({\r\n\t\t\ticon: 'error',\r\n\t\t\ttitle: 'Payment was not successful',\r\n\t\t\ttime: 4000,\r\n\t\t}); navigate(\"/bookinghistory\");\r\n\t};\r\n\tconst payNow = async token => {\r\n\t\ttry {\r\n\t\t\tconst response = await axios({\r\n\t\t\t\turl: 'http://localhost:3000/payment',\r\n\t\t\t\tmethod: 'post',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tamount: ticket.price * 100,\r\n\t\t\t\t\ttoken,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tif (response.status === 200) {\r\n\t\t\t\thandleSuccess();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleFailure();\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"back\">\r\n\t\t\t\t<a href=\"/bookticket\"><button type=\"button\" className=\"btn btn-secondary text-white\"><i className=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>&nbsp;&nbsp;Back</button></a>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t<div className=\"row justify-content-center\">\r\n\t\t\t\t\t<div className=\"card1 my-4 p-3\">\r\n\t\t\t\t\t\t<div className=\"row main\">\r\n\t\t\t\t\t\t\t<div className=\"col-12\"><span>Movie Ticket Payment Details</span>&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"row justify-content-center mrow\">\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<img src=\"https://img.icons8.com/color/48/000000/mastercard-logo.png\" width=\"35px\" height=\"35px\" />\r\n\t\t\t\t\t\t\t\t<img src=\"https://img.icons8.com/color/48/000000/visa.png\" width=\"35px\" height=\"35px\" />\r\n\t\t\t\t\t\t\t\t<img src=\"https://img.icons8.com/color/48/000000/paypal.png\" width=\"35px\" height=\"35px\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<StripeCheckout\r\n\t\t\t\t\t\t\tstripeKey={publishableKey}\r\n\t\t\t\t\t\t\tlabel=\"Pay Now\"\r\n\t\t\t\t\t\t\tname=\"Pay With Credit/ Debit Card\"\r\n\t\t\t\t\t\t\tbillingAddress\r\n\t\t\t\t\t\t\tshippingAddress\r\n\t\t\t\t\t\t\tamount={priceForStripe}\r\n\t\t\t\t\t\t\tdescription={`Your total is INR${ticket.price}`}\r\n\t\t\t\t\t\t\ttoken={payNow}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}