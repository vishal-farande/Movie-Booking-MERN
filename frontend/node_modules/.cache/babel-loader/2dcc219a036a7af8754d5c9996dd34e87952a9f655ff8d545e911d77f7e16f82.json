{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{useState,useEffect}from\"react\";import Header from\"./Header\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Bookinghitory(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),bhistory=_useState2[0],setHistory=_useState2[1];useEffect(function(){listhistory();},[]);function listhistory(){return _listhistory.apply(this,arguments);}function _listhistory(){_listhistory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var location,token,settings,fetchResponse,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:location=\"localhost\";token=sessionStorage.getItem('token');settings={method:'GET',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(token)}};_context.prev=3;_context.next=6;return fetch(\"http://\".concat(location,\":3000/bookings/history/\"),settings);case 6:fetchResponse=_context.sent;_context.next=9;return fetchResponse.json();case 9:data=_context.sent;setHistory(data.history);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](3);return _context.abrupt(\"return\",_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[3,13]]);}));return _listhistory.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\" col-md-6 m-5  mx-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{id:\"update3\",className:\"Update3 text-white\",children:\"BOOKING HISTORY\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered table-responsive\",id:\"movielist1\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-transparent text-white\",id:\"moviethead1\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"head\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"head-text-center\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"head-text-center\",children:\"Movie Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"head-text-center\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"head-text-center\",children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"head-text-center\",children:\"No of seats\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"head-text-center\",children:\"Booking time\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"m-3 p-5\",id:\"movieData\",children:bhistory.map(function(history){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:history.email}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:history.movie_name}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:history.date}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:history.time}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:history.no_of_seat}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:history.created_at})]},history._id);})})]})]})]});}export default Bookinghitory;","map":{"version":3,"names":["React","useState","useEffect","Header","Bookinghitory","bhistory","setHistory","listhistory","location","token","sessionStorage","getItem","settings","method","headers","Accept","Authorization","fetch","fetchResponse","json","data","history","map","email","movie_name","date","time","no_of_seat","created_at","_id"],"sources":["C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/src/components/Bookinghistory.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Header from \"./Header\";\r\n\r\n\r\nfunction Bookinghitory() {\r\n    const [bhistory, setHistory] = useState([])\r\n\r\n    useEffect(() => {\r\n        listhistory();\r\n    }, []);\r\n\r\n    async function listhistory() {\r\n\r\n        const location = \"localhost\";\r\n        const token = sessionStorage.getItem('token');\r\n        const settings = {\r\n            method: 'GET',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${token}`,\r\n            }\r\n        };\r\n\r\n        try {\r\n            //user list\r\n            const fetchResponse = await fetch(`http://${location}:3000/bookings/history/`, settings);\r\n            const data = await fetchResponse.json();\r\n            setHistory(data.history);\r\n        }\r\n        catch (e) {\r\n            return e;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <div className=\" col-md-6 m-5  mx-auto\">\r\n                <h3 id=\"update3\" className=\"Update3 text-white\">BOOKING HISTORY</h3>\r\n                <table className=\"table table-bordered table-responsive\" id=\"movielist1\" >\r\n\r\n                    <thead className=\"thead-transparent text-white\" id=\"moviethead1\">\r\n                        <tr className=\"head\">\r\n                            <th scope=\"col\" className=\"head-text-center\">Email</th>\r\n                            <th scope=\"col\" className=\"head-text-center\">Movie Name</th>\r\n                            <th scope=\"col\" className=\"head-text-center\">Date</th>\r\n                            <th scope=\"col\" className=\"head-text-center\">Time</th>\r\n                            <th scope=\"col\" className=\"head-text-center\">No of seats</th>\r\n                            <th scope=\"col\" className=\"head-text-center\">Booking time</th>\r\n                        </tr>\r\n                    </thead>\r\n\r\n                    <tbody className=\"m-3 p-5\" id=\"movieData\">\r\n                        {bhistory.map(history => {\r\n                            return (\r\n                                <tr key={history._id}>\r\n                                    <td className=\"text-center\">{history.email}</td>\r\n                                    <td className=\"text-center\">{history.movie_name}</td>\r\n                                    <td className=\"text-center\">{history.date}</td>\r\n                                    <td className=\"text-center\">{history.time}</td>\r\n                                    <td className=\"text-center\">{history.no_of_seat}</td>\r\n                                    <td className=\"text-center\">{history.created_at}</td>\r\n                                </tr>\r\n                            )\r\n                        })}\r\n                    </tbody>\r\n\r\n                </table>\r\n            </div>\r\n        </>\r\n    );\r\n\r\n}\r\n\r\nexport default Bookinghitory;"],"mappings":"meAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAOC,OAAM,KAAM,UAAU,CAAC,6IAG9B,QAASC,cAAa,EAAG,CACrB,cAA+BH,QAAQ,CAAC,EAAE,CAAC,wCAApCI,QAAQ,eAAEC,UAAU,eAE3BJ,SAAS,CAAC,UAAM,CACZK,WAAW,EAAE,CACjB,CAAC,CAAE,EAAE,CAAC,CAAC,QAEQA,YAAW,2IAA1B,kLAEUC,QAAQ,CAAG,WAAW,CACtBC,KAAK,CAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CACvCC,QAAQ,CAAG,CACbC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACLC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAYP,KAAK,CAClC,CACJ,CAAC,uCAI+BQ,MAAK,kBAAWT,QAAQ,4BAA2BI,QAAQ,CAAC,QAAlFM,aAAa,qCACAA,cAAa,CAACC,IAAI,EAAE,QAAjCC,IAAI,eACVd,UAAU,CAACc,IAAI,CAACC,OAAO,CAAC,CAAC,mMAMhC,8CAGD,mBACI,wCACI,KAAC,MAAM,IAAG,cACV,aAAK,SAAS,CAAC,wBAAwB,wBACnC,WAAI,EAAE,CAAC,SAAS,CAAC,SAAS,CAAC,oBAAoB,6BAAqB,cACpE,eAAO,SAAS,CAAC,uCAAuC,CAAC,EAAE,CAAC,YAAY,wBAEpE,cAAO,SAAS,CAAC,8BAA8B,CAAC,EAAE,CAAC,aAAa,uBAC5D,YAAI,SAAS,CAAC,MAAM,wBAChB,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,kBAAkB,mBAAW,cACvD,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,kBAAkB,wBAAgB,cAC5D,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,kBAAkB,kBAAU,cACtD,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,kBAAkB,kBAAU,cACtD,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,kBAAkB,yBAAiB,cAC7D,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,kBAAkB,0BAAkB,GAC7D,EACD,cAER,cAAO,SAAS,CAAC,SAAS,CAAC,EAAE,CAAC,WAAW,UACpChB,QAAQ,CAACiB,GAAG,CAAC,SAAAD,OAAO,CAAI,CACrB,mBACI,mCACI,WAAI,SAAS,CAAC,aAAa,UAAEA,OAAO,CAACE,KAAK,EAAM,cAChD,WAAI,SAAS,CAAC,aAAa,UAAEF,OAAO,CAACG,UAAU,EAAM,cACrD,WAAI,SAAS,CAAC,aAAa,UAAEH,OAAO,CAACI,IAAI,EAAM,cAC/C,WAAI,SAAS,CAAC,aAAa,UAAEJ,OAAO,CAACK,IAAI,EAAM,cAC/C,WAAI,SAAS,CAAC,aAAa,UAAEL,OAAO,CAACM,UAAU,EAAM,cACrD,WAAI,SAAS,CAAC,aAAa,UAAEN,OAAO,CAACO,UAAU,EAAM,GANhDP,OAAO,CAACQ,GAAG,CAOf,CAEb,CAAC,CAAC,EACE,GAEJ,GACN,GACP,CAGX,CAEA,cAAezB,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}