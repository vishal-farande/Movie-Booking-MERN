{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{useState,useEffect}from\"react\";import Header from\"./Header\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Listmovie(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),lmovies=_useState2[0],setMovies=_useState2[1];useEffect(function(){listmovies();},[]);function listmovies(){return _listmovies.apply(this,arguments);}function _listmovies(){_listmovies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var location,token,settings,fetchResponse,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:location=\"localhost\";token=sessionStorage.getItem('token');settings={method:'GET',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(token)}};_context.prev=3;_context.next=6;return fetch(\"http://\".concat(location,\":3000/movies/listallmovie/\"),settings);case 6:fetchResponse=_context.sent;_context.next=9;return fetchResponse.json();case 9:data=_context.sent;setMovies(data.listMovie);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](3);return _context.abrupt(\"return\",_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[3,13]]);}));return _listmovies.apply(this,arguments);}function deleteMovie(_x){return _deleteMovie.apply(this,arguments);}function _deleteMovie(){_deleteMovie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_id){var location,data,token,settings,fetchResponse,_data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.confirm(\"Do you want to delete the movie?\")){_context2.next=19;break;}location=\"localhost\";data={\"_id\":_id};token=sessionStorage.getItem('token');settings={method:'DELETE',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify(data)};_context2.prev=5;_context2.next=8;return fetch(\"http://\".concat(location,\":3000/movies/delete/\"),settings);case 8:fetchResponse=_context2.sent;_context2.next=11;return fetchResponse.json();case 11:_data=_context2.sent;listmovies();return _context2.abrupt(\"return\",_data);case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](5);return _context2.abrupt(\"return\",_context2.t0);case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[5,16]]);}));return _deleteMovie.apply(this,arguments);}function updateMovie(_x2){return _updateMovie.apply(this,arguments);}function _updateMovie(){_updateMovie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_id){var location,data,token,settings,fetchResponse,data2;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!window.confirm(\"Do you want to edit the movie?\")){_context3.next=20;break;}location=\"localhost\";data={\"_id\":_id};token=sessionStorage.getItem('token');settings={method:'GET',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(token),body:JSON.stringify(data)}};_context3.prev=5;_context3.next=8;return fetch(\"http://\".concat(location,\":3000/movies/specificMovie/\"),settings);case 8:fetchResponse=_context3.sent;_context3.next=11;return fetchResponse.json();case 11:data2=_context3.sent;console.log(data2);listmovies();return _context3.abrupt(\"return\",data);case 17:_context3.prev=17;_context3.t0=_context3[\"catch\"](5);return _context3.abrupt(\"return\",_context3.t0);case 20:case\"end\":return _context3.stop();}}},_callee3,null,[[5,17]]);}));return _updateMovie.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"listmovies\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"title\",{children:\"List Movies\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container main-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" col-md-10 m-5 p-5 mx-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{id:\"update\",className:\"Update text-white\",children:\"EDIT/DELETE MOVIE\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered table-responsive\",id:\"ulist2\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-transparent\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-center\",children:\"MOVIE NAME\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-center\",children:\"DESCRIPTION\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-center\",children:\"RUNTIME(HH:MM)\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-center\",children:\"EDIT\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-center\",children:\"DELETE\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"m-5 p-7\",id:\"userData\",children:lmovies.map(function(listMovie){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:listMovie.movie_name}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:listMovie.description}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:listMovie.runtime}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center1\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return updateMovie(listMovie._id);},children:\"Edit\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteMovie(listMovie._id);},children:\"Delete\"})})]},listMovie._id);})})]})]})})]})})]});}export default Listmovie;","map":{"version":3,"names":["React","useState","useEffect","Header","Listmovie","lmovies","setMovies","listmovies","location","token","sessionStorage","getItem","settings","method","headers","Accept","Authorization","fetch","fetchResponse","json","data","listMovie","deleteMovie","_id","window","confirm","body","JSON","stringify","updateMovie","data2","console","log","map","movie_name","description","runtime"],"sources":["C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/src/components/Listmovie.jsx"],"sourcesContent":["import React from \"react\";\r\nimport {useState, useEffect} from \"react\";\r\nimport Header from \"./Header\";\r\n\r\nfunction Listmovie() {\r\n    const [lmovies, setMovies] = useState([])\r\n\r\n    useEffect(() => {\r\n        listmovies();\r\n    }, []);\r\n\r\n    async function listmovies(){\r\n        \r\n        const location = \"localhost\";\r\n        const token = sessionStorage.getItem('token');\r\n        const settings = {\r\n            method: 'GET',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${token}`,\r\n            }\r\n        };\r\n\r\n        try {\r\n            //user list\r\n            const fetchResponse = await fetch(`http://${location}:3000/movies/listallmovie/`, settings);\r\n            const data = await fetchResponse.json();\r\n            setMovies(data.listMovie);\r\n        }\r\n        catch (e) {\r\n            return e;\r\n        }\r\n\r\n    }\r\n\r\n    async function deleteMovie(_id){\r\n        if(window.confirm(\"Do you want to delete the movie?\")){\r\n            const location=\"localhost\";\r\n            const data={\r\n                \"_id\":_id\r\n            }\r\n\r\n            const token = sessionStorage.getItem('token');\r\n            const settings={\r\n                method: 'DELETE',\r\n                headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n            body: JSON.stringify(data)\r\n            };\r\n\r\n            try {\r\n            //delete movie\r\n            const fetchResponse = await fetch(`http://${location}:3000/movies/delete/`, settings);\r\n            const data = await fetchResponse.json();\r\n            listmovies();\r\n            return data;\r\n            }\r\n            catch (e) {\r\n                return e;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    async function updateMovie(_id){\r\n        if(window.confirm(\"Do you want to edit the movie?\")){\r\n            const location=\"localhost\";\r\n            const data={\r\n                \"_id\":_id,\r\n            }\r\n\r\n            const token = sessionStorage.getItem('token');\r\n            const settings={\r\n                method: 'GET',\r\n                headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${token}`,\r\n                body: JSON.stringify(data)\r\n            },\r\n            \r\n            };\r\n\r\n            try {\r\n            //user list\r\n            const fetchResponse = await fetch(`http://${location}:3000/movies/specificMovie/`, settings);\r\n            const data2 = await fetchResponse.json();\r\n            console.log(data2);\r\n            listmovies();\r\n            return data;\r\n            }\r\n            catch (e) {\r\n                return e;\r\n            }\r\n\r\n        }\r\n    }\r\n  return (\r\n      <>\r\n            <Header/>\r\n    <div className=\"listmovies\">\r\n      <div className=\"container\">\r\n        <title>List Movies</title>\r\n        \r\n        <div className=\"container main-container\">\r\n            <div className= \" col-md-10 m-5 p-5 mx-auto\">\r\n                <h3 id=\"update\" className=\"Update text-white\">EDIT/DELETE MOVIE</h3>\r\n                <table className=\"table table-bordered table-responsive\" id=\"ulist2\" >\r\n\r\n                    <thead className=\"thead-transparent\">\r\n                        <tr>\r\n                            <th scope=\"col\" className=\"text-center\">MOVIE NAME</th>\r\n                            <th scope=\"col\" className=\"text-center\">DESCRIPTION</th>\r\n                            <th scope=\"col\" className=\"text-center\">RUNTIME(HH:MM)</th> \r\n                            <th scope=\"col\" className=\"text-center\">EDIT</th> \r\n                            <th scope=\"col\" className=\"text-center\">DELETE</th>                 \r\n                        </tr>\r\n                    </thead>\r\n\r\n                    <tbody className= \"m-5 p-7\" id=\"userData\">\r\n                        {lmovies.map(listMovie => {\r\n                            return(\r\n                            <tr key={listMovie._id}>\r\n                                <td className=\"text-center\">{listMovie.movie_name}</td>\r\n                                <td className=\"text-center\">{listMovie.description}</td>\r\n                                <td className=\"text-center\">{listMovie.runtime}</td>\r\n                                <td className=\"text-center1\"><button onClick={()=>updateMovie(listMovie._id)}>Edit</button></td>\r\n                                <td className=\"text-center2\"><button onClick={()=>deleteMovie(listMovie._id)}>Delete</button></td>\r\n                            </tr>\r\n                            )\r\n                        })}\r\n                    </tbody>\r\n\r\n                </table>\r\n            </div>\r\n \r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n  \r\n}\r\n\r\nexport default Listmovie;"],"mappings":"meAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAAQC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CACzC,MAAOC,OAAM,KAAM,UAAU,CAAC,6IAE9B,QAASC,UAAS,EAAG,CACjB,cAA6BH,QAAQ,CAAC,EAAE,CAAC,wCAAlCI,OAAO,eAAEC,SAAS,eAEzBJ,SAAS,CAAC,UAAM,CACZK,UAAU,EAAE,CAChB,CAAC,CAAE,EAAE,CAAC,CAAC,QAEQA,WAAU,wIAAzB,kLAEUC,QAAQ,CAAG,WAAW,CACtBC,KAAK,CAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CACvCC,QAAQ,CAAG,CACbC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACLC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAYP,KAAK,CAClC,CACJ,CAAC,uCAI+BQ,MAAK,kBAAWT,QAAQ,+BAA8BI,QAAQ,CAAC,QAArFM,aAAa,qCACAA,cAAa,CAACC,IAAI,EAAE,QAAjCC,IAAI,eACVd,SAAS,CAACc,IAAI,CAACC,SAAS,CAAC,CAAC,mMAMjC,qDAEcC,YAAW,6IAA1B,kBAA2BC,GAAG,+KACvBC,MAAM,CAACC,OAAO,CAAC,kCAAkC,CAAC,2BAC3CjB,QAAQ,CAAC,WAAW,CACpBY,IAAI,CAAC,CACP,KAAK,CAACG,GACV,CAAC,CAEKd,KAAK,CAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CACvCC,QAAQ,CAAC,CACXC,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACTC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAYP,KAAK,CAClC,CAAC,CACDiB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,IAAI,CACzB,CAAC,yCAI2BH,MAAK,kBAAWT,QAAQ,yBAAwBI,QAAQ,CAAC,QAA/EM,aAAa,wCACAA,cAAa,CAACC,IAAI,EAAE,SAAjCC,KAAI,gBACVb,UAAU,EAAE,CAAC,iCACNa,KAAI,qLAOlB,sDAEcS,YAAW,8IAA1B,kBAA2BN,GAAG,+KACvBC,MAAM,CAACC,OAAO,CAAC,gCAAgC,CAAC,2BACzCjB,QAAQ,CAAC,WAAW,CACpBY,IAAI,CAAC,CACP,KAAK,CAACG,GACV,CAAC,CAEKd,KAAK,CAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CACvCC,QAAQ,CAAC,CACXC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACTC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAYP,KAAK,CAAE,CAChCiB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,IAAI,CAC7B,CAEA,CAAC,yCAI2BH,MAAK,kBAAWT,QAAQ,gCAA+BI,QAAQ,CAAC,QAAtFM,aAAa,wCACCA,cAAa,CAACC,IAAI,EAAE,SAAlCW,KAAK,gBACXC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAClBvB,UAAU,EAAE,CAAC,iCACNa,IAAI,qLAOlB,8CACH,mBACI,wCACM,KAAC,MAAM,IAAE,cACjB,YAAK,SAAS,CAAC,YAAY,uBACzB,aAAK,SAAS,CAAC,WAAW,wBACxB,sCAA0B,cAE1B,YAAK,SAAS,CAAC,0BAA0B,uBACrC,aAAK,SAAS,CAAE,4BAA4B,wBACxC,WAAI,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,mBAAmB,+BAAuB,cACpE,eAAO,SAAS,CAAC,uCAAuC,CAAC,EAAE,CAAC,QAAQ,wBAEhE,cAAO,SAAS,CAAC,mBAAmB,uBAChC,mCACI,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,aAAa,wBAAgB,cACvD,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,aAAa,yBAAiB,cACxD,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,aAAa,4BAAoB,cAC3D,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,aAAa,kBAAU,cACjD,WAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,aAAa,oBAAY,GAClD,EACD,cAER,cAAO,SAAS,CAAE,SAAS,CAAC,EAAE,CAAC,UAAU,UACpCf,OAAO,CAAC4B,GAAG,CAAC,SAAAZ,SAAS,CAAI,CACtB,mBACA,mCACI,WAAI,SAAS,CAAC,aAAa,UAAEA,SAAS,CAACa,UAAU,EAAM,cACvD,WAAI,SAAS,CAAC,aAAa,UAAEb,SAAS,CAACc,WAAW,EAAM,cACxD,WAAI,SAAS,CAAC,aAAa,UAAEd,SAAS,CAACe,OAAO,EAAM,cACpD,WAAI,SAAS,CAAC,cAAc,uBAAC,eAAQ,OAAO,CAAE,yBAAIP,YAAW,CAACR,SAAS,CAACE,GAAG,CAAC,EAAC,kBAAc,EAAK,cAChG,WAAI,SAAS,CAAC,cAAc,uBAAC,eAAQ,OAAO,CAAE,yBAAID,YAAW,CAACD,SAAS,CAACE,GAAG,CAAC,EAAC,oBAAgB,EAAK,GAL7FF,SAAS,CAACE,GAAG,CAMjB,CAET,CAAC,CAAC,EACE,GAEJ,GACN,EAEJ,GAEF,EACF,GACH,CAGP,CAEA,cAAenB,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}