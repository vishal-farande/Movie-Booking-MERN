{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{useState}from\"react\";import logo from\"./zlogo.jpg\";import{Link,useNavigate}from\"react-router-dom\";import Navbar from\"./Navbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var navigate=useNavigate();function callLoginAPI(_x){return _callLoginAPI.apply(this,arguments);}function _callLoginAPI(){_callLoginAPI=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var location,data,settings,fetchResponse,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();location=\"localhost\";data={\"email\":email,\"password\":password};settings={method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify(data)};_context.prev=4;_context.next=7;return fetch(\"http://\".concat(location,\":3000/users/login/\"),settings);case 7:fetchResponse=_context.sent;_context.next=10;return fetchResponse.json();case 10:_data=_context.sent;if(_data.token){sessionStorage.setItem('token',_data.token);navigate(\"/home\");}else{window.confirm(\"Invalid Email / Password!\");}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);return _context.abrupt(\"return\",_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[4,14]]);}));return _callLoginAPI.apply(this,arguments);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-form\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"avatar\",src:logo,alt:\"Logo\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},type:\"email\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Passwrod\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},type:\"password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"login_btn\",type:\"submit\",onClick:callLoginAPI,value:\"Sign in\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),\"Remember Me\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"account\",children:[\"Don't have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/SignUp\",id:\"up\",children:\"Sign Up\"})]})]})]})]});}export default Login;","map":{"version":3,"names":["React","useState","logo","Link","useNavigate","Navbar","Login","email","setEmail","password","setPassword","navigate","callLoginAPI","e","preventDefault","location","data","settings","method","headers","Accept","body","JSON","stringify","fetch","fetchResponse","json","token","sessionStorage","setItem","window","confirm","target","value"],"sources":["C:/Users/vivek/Documents/VSem/WebLab/Movie-Ticket-Booking-Website/frontend/src/components/Login.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport logo from \"./zlogo.jpg\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Navbar from \"./Navbar\";\r\n\r\n\r\nfunction Login() {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    async function callLoginAPI(e) {\r\n        e.preventDefault();\r\n        const location = \"localhost\";\r\n        const data = {\r\n            \"email\": email,\r\n            \"password\": password\r\n        }\r\n\r\n        const settings = {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data)\r\n        };\r\n\r\n        try {\r\n            //signin api call\r\n            const fetchResponse = await fetch(`http://${location}:3000/users/login/`, settings);\r\n            const data = await fetchResponse.json();\r\n\r\n\r\n\r\n            if (data.token) {\r\n                sessionStorage.setItem('token', data.token);\r\n                navigate(\"/home\");\r\n            }\r\n            else {\r\n                window.confirm(\"Invalid Email / Password!\");\r\n            }\r\n\r\n        }\r\n        catch (e) {\r\n            return e;\r\n        }\r\n    };\r\n\r\n    return (<>\r\n        <Navbar />\r\n        <div className=\"contact-form\">\r\n            <img className=\"avatar\" src={logo} alt=\"Logo\" />\r\n            <h2>LOGIN</h2>\r\n            <form action=\"\">\r\n                <p>Email</p><input placeholder=\"Enter Email\" value={email} onChange={e => setEmail(e.target.value)} type=\"email\" />\r\n                <p>Passwrod</p><input placeholder=\"Enter Password\" value={password} onChange={e => setPassword(e.target.value)} type=\"password\" />\r\n                <input className=\"login_btn\" type=\"submit\" onClick={callLoginAPI} value=\"Sign in\" />\r\n                <p><input type=\"checkbox\" />Remember Me</p>\r\n                <div className=\"account\">Don't have an account?<Link to=\"/SignUp\" id=\"up\">Sign Up</Link></div>\r\n            </form>\r\n        </div>\r\n    </>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"meAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAOC,KAAI,KAAM,aAAa,CAC9B,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAOC,OAAM,KAAM,UAAU,CAAC,6IAG9B,QAASC,MAAK,EAAG,CACb,cAA0BL,QAAQ,CAAC,EAAE,CAAC,wCAA/BM,KAAK,eAAEC,QAAQ,eACtB,eAAgCP,QAAQ,CAAC,EAAE,CAAC,yCAArCQ,QAAQ,eAAEC,WAAW,eAC5B,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAAC,QAEhBQ,aAAY,gJAA3B,iBAA4BC,CAAC,iKACzBA,CAAC,CAACC,cAAc,EAAE,CACZC,QAAQ,CAAG,WAAW,CACtBC,IAAI,CAAG,CACT,OAAO,CAAET,KAAK,CACd,UAAU,CAAEE,QAChB,CAAC,CAEKQ,QAAQ,CAAG,CACbC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACLC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,IAAI,CAC7B,CAAC,uCAI+BQ,MAAK,kBAAWT,QAAQ,uBAAsBE,QAAQ,CAAC,QAA7EQ,aAAa,sCACAA,cAAa,CAACC,IAAI,EAAE,SAAjCV,KAAI,eAIV,GAAIA,KAAI,CAACW,KAAK,CAAE,CACZC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAEb,KAAI,CAACW,KAAK,CAAC,CAC3ChB,QAAQ,CAAC,OAAO,CAAC,CACrB,CAAC,IACI,CACDmB,MAAM,CAACC,OAAO,CAAC,2BAA2B,CAAC,CAC/C,CAAC,mMAMR,gDAED,mBAAQ,wCACJ,KAAC,MAAM,IAAG,cACV,aAAK,SAAS,CAAC,cAAc,wBACzB,YAAK,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAE7B,IAAK,CAAC,GAAG,CAAC,MAAM,EAAG,cAChD,6BAAc,cACd,cAAM,MAAM,CAAC,EAAE,wBACX,4BAAY,4BAAO,WAAW,CAAC,aAAa,CAAC,KAAK,CAAEK,KAAM,CAAC,QAAQ,CAAE,kBAAAM,CAAC,QAAIL,SAAQ,CAACK,CAAC,CAACmB,MAAM,CAACC,KAAK,CAAC,EAAC,CAAC,IAAI,CAAC,OAAO,EAAG,cACnH,+BAAe,4BAAO,WAAW,CAAC,gBAAgB,CAAC,KAAK,CAAExB,QAAS,CAAC,QAAQ,CAAE,kBAAAI,CAAC,QAAIH,YAAW,CAACG,CAAC,CAACmB,MAAM,CAACC,KAAK,CAAC,EAAC,CAAC,IAAI,CAAC,UAAU,EAAG,cAClI,cAAO,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAErB,YAAa,CAAC,KAAK,CAAC,SAAS,EAAG,cACpF,kCAAG,cAAO,IAAI,CAAC,UAAU,EAAG,iBAAe,cAC3C,aAAK,SAAS,CAAC,SAAS,iDAAuB,KAAC,IAAI,EAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,qBAAe,GAAM,GAC3F,GACL,GACP,CAEP,CAEA,cAAeN,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}